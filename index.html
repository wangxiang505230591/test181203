<!DOCTYPE html>
<html>
  <head>
    <title>HTML5获取麦克风音频,输出到扬声器</title>
	<meta charset="UTF-8">
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>


  </head>
  <body>
  <audio></audio>
	<button class="recorderControl">录制</button>
	
	<script type="text/javascript">

		var promise=navigator.mediaDevices.getUserMedia({audio:true});
promise.then(function(stream){
var audio=document.querySelector("audio")
audio.src=URL.createObjectURL(stream);
var recorder=new MediaRecorder(stream);

var recorderControl=document.querySelector(".recorderControl");
recorderControl.onclick=function(){
this.textContent==="录制"?audio.play():audio.pause();
this.textContent==="录制"?recorder.start():recorder.stop();
this.textContent=this.textContent==="录制"?"停止":"录制";
}
recorder.ondataavailable=function(){
//收集媒体设备 获得到的 可以使用的 媒体流数据
alert(event.data)
}
});


//获得到有效数据的时候调用
promise.catch(function(error){
alert(error)
});

	</script>
  </body>
</html>
