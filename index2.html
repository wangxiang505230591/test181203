
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>createMediaStreamSource example</title>

    <link rel="stylesheet" href="">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <h1>createMediaStreamSource example1</h1>
    <video controls>
    </video>
    <br>
    
    <pre></pre>

    <p></p>
    <ul class="freq-response-output">
    </ul>
  </body>
<script>

var myP = document.querySelector('p');

if (navigator.mediaDevices) {
    console.log('getUserMedia supported.');
    navigator.mediaDevices.getUserMedia({audio: true, video: false})
    .then(function(stream) {
      
        var audioCtx = new AudioContext();
        var source = audioCtx.createMediaStreamSource(stream);
		var scriptNode = audioCtx.createScriptProcessor(4096, 1, 1);
       
		scriptNode.onaudioprocess = function(audioProcessingEvent) {
			myP.innerHTML = "audioProcessingEvent ="+audioProcessingEvent;
			//alert("audioProcessingEvent ="+audioProcessingEvent);
		}

    })
    .catch(function(err) {
        myP.innerHTML = 'The following gUM error occured: ' + err;
    });
} else {
    myP.innerHTML = 'getUserMedia not supported on your browser!';
}
// dump script to pre element
</script>
</html>